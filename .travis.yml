language: java

jdk:
  - openjdk8

script:
  - mvn test -B

before_deploy:
  - POM_VERSION=$(mvn -q -Dexec.executable=echo -Dexec.args='${project.version}' --non-recursive exec:exec)

# Releases config copied from https://docs.travis-ci.com/user/deployment/releases/ and secure key generated by following
# https://stackoverflow.com/questions/25302518/travis-ci-setup-releases-with-github-token#answer-57032190
deploy:
  provider: releases
  api_key:
    secure: FamDJ2uxEL83Lx7zBot2pmuD32p8DtU8p8WsWzv9mLzO4U5QUMhWtAxMRuDTZQQg6/SiN7Ph7RQiIfMU8P2pdEDChhclRErcdEAwPGT2fuUuumYU4ZZNzk4hQo2NKd8Yz7sCIn1LFTgqDpjjlY70nS+7LW0Eski886GLMrgYJS9cyhkyMvBm0Hch5rAyZdhYts/EHKyMxbZBCwPY+pmgaaFxTmP6+Id4henwt1xfFPEaqEg+142BALEOVAkO+/KEObwoj0ITMy+zkK1m/V9/o3v59am1F1BUYzEH8PdBFnxG5R/Q9yE2rtsQIppHOXiaBm3Vew0RZ1IC22bexOPih1b/hB3nvUrvnXQhhFalOln1FcpnQaSOVkbzB7wNDhESg4qSVoTUzndLO5CbFYitNGVJ9gt6qvbwUIupTQo5hQCCXFIvEWMsBilftCm7KQPNxoKLdzUk+/Eps2wg94f8+by1B0L8XnKUiUIDcHy6TdjYL+pS15Owc9W6FalvY2l/FoElcVuEY9TBFiAngx/LMZxIoVFcc4zlEyEFYh6SfiKx5rQN5XnKdI0FxvFFw29h5ZN1Y9LRlV0xw0TMd3YketfZDQNYg3Kmz7qZ2eDTkEoKuZyDvY3mNp9kIQLSVWkqFA1oj00IA+mkwCGvDLukM5oJxyAxIbo9APUk5x5C26o=
  file: "target/spt-development-logging-spring-${POM_VERSION}.jar"
  skip_cleanup: true
  on:
    tags: true
