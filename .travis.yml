language: java

jdk:
  - openjdk15

script:
  - mvn test -B

before_deploy:
  - POM_VERSION=$(mvn -q -Dexec.executable=echo -Dexec.args='${project.version}' --non-recursive exec:exec)

# Releases config copied from https://docs.travis-ci.com/user/deployment/releases/ and secure key generated by following
# https://stackoverflow.com/questions/25302518/travis-ci-setup-releases-with-github-token#answer-57032190
deploy:
  provider: releases
  api_key:
    secure: laB7B7A4PPm3XWTAdmp+2jaQXA1tyzC8LRZjKAcz7AuIfMlVVvp1O42/mnkewtlLQemyzqTJWImvZ7D+KrAQLdmgmDZjq0hZQy9an0woKBe+loMtqmGToRi+UpGJKv0Kzq4DpBBIRreqokxW5yNId9Q25QI8gEuI5irM0w/rehV12NnyHE+w08UbXS8WO6HfE0KmOR5ncKL7gR7NVOees3nCYCsw3nI8Y0DwjkFMdpqH5rqnGk+qW4P+3U58xvUTrna3NKJ9lLo6lPOnwAGS5E8u8UtZ2Xx0tgsXSBRdbPimZpkTB+nrSyORwpNPjntkfFZH6+vLPN0xLf7/bUB2bGEpVxEbCBTV0CeQCrxh04esj0tN1ANCObISA8ZFH4020xh+OYR93JVAcJMJLHIT73bVKXh5Sv8Q0v99VJP6hmZHQFtL/l68Pmf8wTYH9E/2Akxi9ytSYojZTZh4zkiXTS7dPRfoxkvGSTy8S77nS6mtZHQm0UyKS+o6dq0VHqpWkoY8NijrPCg/a+qXDpCF532eBYDLxZQIFEdVFmF+kg4fpx63oL/03JkU9P3zptVhWbk4qkuad8HuVIC5p9R04f89KHT5wUNabWBhFP/6O0M6X48ukI359jwYbbNz8WYg5HkBZwvGlzVgzLJ9OFESRaDZ83mf5+uDz7LWcBT52GM=
  file: "target/spt-development-logging-spring-${POM_VERSION}.jar"
  skip_cleanup: true
  on:
    tags: true
